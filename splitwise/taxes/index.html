<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from www.splitwise.com/taxes/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 28 Oct 2024 12:55:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Rewrite the tax code :: Splitwise</title>
  <meta name="description" content="How would you rewrite the U.S. tax code? An interactive infographic to better understand the way our tax system works.">
  <!-- <meta name="viewport" content="width=device-width,initial-scale=1"> -->
  <meta property="og:image" content="../assets/logo_large.png">
  <link rel="canonical" href="index.html">
  <link rel="stylesheet" href="https://assets.splitwise.com/assets/less/bootstrap-2e2ef392a16f2b09e3186627fcb8a67743a98e458316950369a0619a2c1e72aa.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script src="https://assets.splitwise.com/assets/jquery.tooltip-8354ae65c0348a160ed166caf9dfed058eb0f4a91e1dfdbd9d6e9ff149ce870b.js"></script>
<script src="https://assets.splitwise.com/assets/rails-c089968891739babf1ecbd30acd6da69d4d697ab93dbf602eb559dcc27b5045f.js"></script>
<script src="https://assets.splitwise.com/assets/bootstrap/bootstrap-modal-64f11e41a81cd6b12d1f36a625fb8fa6fe781e09c6d58f17f98f7a24d0bb694a.js"></script>
<script src="https://assets.splitwise.com/assets/bootstrap/bootstrap-twipsy-87c81ac87144f090837ad77ccaad0b391875923c5bf94deb56e02e764dfae372.js"></script>
<script src="https://assets.splitwise.com/assets/bootstrap/bootstrap-popover-b1297c39a8861e1a4910add36d76863b011c19e412a29389b5878fdd474c262a.js"></script>
<script src="https://assets.splitwise.com/assets/bootstrap/jquery.placeholder-872796542f0eceaea709c6cef79cc86bb7d4c5f72fabbff16d80f85471d62bb8.js"></script>
<script src="https://assets.splitwise.com/assets/nested_form-dc44acd2855f8b5289685d1abec77c25d7dae77ded5fa9745288e83c35df1fd4.js"></script>
  
  <script src="https://assets.splitwise.com/assets/boilerplate-704f4742daadb133748aa93e789c6067f00a38db3ef8368d7bd459e1e339d886.js"></script>
  <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="U5D8UG0Qi7vhWQx5qGPZGdW09-ckRrRGn8bfVpMQR7S2AqDWZU7WbDlHEbyQuWxBQd462kl6a71_gFv-ggVCWQ" />
  <script type="text/javascript">var switchTo5x=true;</script>
  <script type="text/javascript" src="https://w.sharethis.com/button/buttons.js"></script>
  <script type="text/javascript">stLight.options({publisher: "def61343-c854-4d5c-975d-8bf0a12ffb9e"}); </script>
  
</head>
<body>
  <div id="big_container">
    <div id="page-group">
      <header>
        <div class="fill" style="height: 45px">
          <div class="container">
            <h3><a style="padding-top: 6px; color: #999; font-weight: 300; margin-left: -15px" href="../index.html">This fairness project brought to you by <img alt="Splitwise" id="logo" style="width: 179px; height: 33px; vertical-align: -10px; margin-left: 5px" src="https://assets.splitwise.com/assets/adorable/logo-8a4e90feaab4f6012f298b9c018f65eb0ba124bb5cdf23f3c21e13dba0cac862.png" /></a></h3>

            <ul class="nav secondary-nav" style="margin-top: 13px">
              <span class='st_facebook_hcount' st_url="https://www.splitwise.com/calculators/tax/" displayText='Facebook'></span>
              <span class='st_twitter_hcount' st_url="https://www.splitwise.com/calculators/tax/" st_title="How would you rewrite the U.S. tax code? Join the conversation with @splitwise:" displayText='Tweet'></span>
              <span class='st_email_hcount' st_url="https://www.splitwise.com/calculators/tax/" displayText='Email'></span>
            </ul>
          </div>
        </div>
      </header>
      <div id="main" role="main">
        
<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=293864780643203";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<script type="text/javascript" charset="utf-8">
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="http://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>

<script src="https://assets.splitwise.com/assets/jquery-ui-1.8.18.custom.min-b32d3322836fc77cf1ddf258ede607ef04512814369630d5292ae9455b16777f.js"></script>
<script src="https://assets.splitwise.com/assets/raphael-min-29b955062a4efe748386e05e0a566349ff888371c8f5d428b7fdebae26dcebba.js"></script>
<link rel="stylesheet" href="https://assets.splitwise.com/assets/jquery-ui-1.8.18.custom-c23600eb5710393e806a750ff16b0c75ca8f4f8c5b17bd6a1a01111585d82603.css" />

<style>
  .fancy-text{
    font-family: Baskerville, 'Baskerville old face', 'Hoefler Text', Garamond, 'Times New Roman', serif;
    font-weight: normal }

  .tool_tip{
    cursor: help;
  }
  .tooltip{
    max-width: 375px }
    .tooltip .container{
      font-size: 12px }


  #legend{
    position: absolute;
    bottom: 10px;
    padding: 5px;
    background: rgba(252,252,252,0.7);
    font-size: 11px;
    /*color: #999;*/
    left: 10px;
    z-index: 1; }
    #legend .color_block{
      display: inline-block;
      height: 14px;
      width: 14px;
      margin-right: 3px;
      margin-bottom: -2px;
    }

  #active_tax_code{
    position: absolute;
    top: 15px;
    left: 20px;
    /*padding: 15px;*/
    font-size: 24px;
    margin: 0;
    color: #666;
    z-index: 8 }
    #active_tax_code > a {
      display: block;
      padding: 5px;
      border: 1px solid #ddd;
      background: #fcfcfc;
      margin-left: -5px;
      text-decoration: none;
      color: inherit; }
      #active_tax_code > a:hover{
        background: #eee }
  #filing_status{
    position: absolute;
    top: 50px;
    left: 20px;
    color: #999;
    font-size: 14px;
    font-weight: 300;
    margin-top: 5px }

  #active_tax_code_menu{
    display: none;
    position: absolute;
    top: 49px;
    left: 15px;
    background: #333;
    background: rgba(50,50,50,0.95);
    border-radius: 0 5px 5px 5px;
    -webkit-box-shadow: 0px 1px 4px rgba(0,0,0,0.5);
    color: #fff;
    width: 310px;
    z-index: 99 }

  #reset_tax_plan{
    position: absolute;
    display: block;
    padding: 5px;
    background: #fcfcfc;
    top: 19px;
    left: 170px;
    opacity: 0.5;
    z-index: 7;
  }


  #tax_chart_container{
    margin: 0 0 55px;
    background: #fcfcfc;
    height: 390px;
    position: relative;
  }
    #tax_chart_container *{
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    #tax_chart_container #mouseover_tooltip{
      display: none;
      position: absolute;
      border-radius: 8px;
      background: #222;
      background: rgba(0,0,0,0.9);
      width: 16px;
      height: 16px;
      margin-left: -8px;
      margin-top: -8px;
      z-index: 7 }
      #mouseover_tooltip .line{
        -webkit-transition: all 0.25s ease;
        -moz-transition: all 0.25s ease;
        -ms-transition: all 0.25s ease;
        transition: all 0.25s ease;
        position: absolute;
        top: 10px;
        border-left: 2px solid #222;
        width: 1px;
        height: 15px;
        left: 50%;
        margin-left: -1px }
      #tax_chart_container #mouseover_tooltip_details{
        -webkit-transition: all 0.25s ease;
        -moz-transition: all 0.25s ease;
        -ms-transition: all 0.25s ease;
        transition: all 0.25s ease;
        position: absolute;
        top: 25px;
        left: -70px;
        background: #222;
        background: rgba(0,0,0,0.8);
        color: #fff;
        width: 140px;
        border-radius: 5px;
        padding: 5px }
      #tax_chart_container:hover #mouseover_tooltip{
        display: block }
    #tax_chart_container #mouseover_tooltip.low #mouseover_tooltip_details{
      top: -76px }
      #tax_chart_container #mouseover_tooltip.low .line{
        top: -10px }
  .label-y{
    position: absolute;
    font-size: 18px;
    top: 50%;
    margin-top: -10px;
    left: -50px;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
  }
  .label-x{
    position: absolute;
    text-align: center;
    left: 0px;
    bottom: -55px;
    width: 100%;
    font-size: 18px;
  }
  #tax_chart{
    position: relative;
    width: 100%;
    height: 100%;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,0.15);
    box-sizing: border-box;
    overflow: hidden;
    -webkit-box-shadow: inset 0px 0px 15px rgba(0,0,0,0.2);
  }
  .bar{
    position: absolute;
    text-align: center;
    bottom: 98px;
    background: #f00;
    border-left: 1px solid #fff;
    border-left: 1px solid rgba(255,255,255,0.6);
    /*border-top: 1px solid #ddd;*/
    z-index: 1;
    /*box-sizing: border-box;*/
    margin-left: -1px;
    color: #999;
    -webkit-box-shadow: 0 0 5px rgba(0,0,0,0.3);
  }
  .bar.on_top{
    z-index: 90;
    background: none;
    border-color: transparent;
    -webkit-box-shadow: none;
    opacity: 0;
  }
/*  .bar:hover{
    opacity: 1.0;
    -webkit-box-shadow: 0 0 7px rgba(0,0,0,0.5);
    z-index: 9;
  }*/
    .bar .description {
      -webkit-transition: all 0.1s ease;
      position: absolute;
      top: -30px;
      left: 0;
      width: 100%;
      font-size: 13px;
      color: #999;
    }
    .bar:hover .description, .bar.hover .description{
      color: #000 }
    .bar .vertical-drag{
      background: #88aa99;
      height: 4px;
      font-size: 24px;
      position: absolute;
      -webkit-transition: all 0.1s ease;
      top: 0px;
      left: 0;
      line-height: 0px;
      width: 100%;
      text-shadow: 0 1px 1px #fff, 1px 0 1px #fff, -1px 0 1px #fff;
      color: #666;
    }
    .bar:hover .vertical-drag, .bar.hover .vertical-drag{
      background: #558877;
    }
    .bar .vertical-drag:hover, .bar.hover .vertical-drag{
      color: #000;
    }


  #net_effect{
    position: absolute;
    bottom: 10px;
    right: 10px;
    padding: 0 10px 5px;
    background: rgba(252,252,252,0.7);
    color: #666;
    text-align: right;
    z-index: 1;
    font-size: 28px; }
    #net_effect h5{
      font-size: 14px;
      font-weight: 300;
      color: #999;
      line-height: 30px;
      margin: 0; }
    #net_effect_percentage{
      font-size: 16px;
      margin-top: 7px;
      color: #777;
    }

  #tax_chart_x_sliders{
    position: absolute;
    bottom: -47px;
    /*background: #f00;*/
    width: 100%;
    height: 40px}
    #tax_chart_x_sliders > div{
      background: #fff;
      width: 46px;
      height: 20px;
      border: 1px solid #aaa;
      box-sizing: border-box;
      margin-left: -23px;
      position: absolute;
      top: 1px;
      text-align: center;
      font-size: 12px;
      color: #777 }
      #tax_chart_x_sliders > div *{
        -webkit-transition: all 0.25s ease;
        -moz-transition: all 0.25s ease;
        -ms-transition: all 0.25s ease;
        transition: all 0.25s ease;
      }
      #tax_chart_x_sliders > div img{ display: none }
      #tax_chart_x_sliders > div .left{
        position: absolute;
        right: 44px;
        z-index: 0;
        text-align: right;
        color: #bbb;
      }
      #tax_chart_x_sliders > div .right{
        text-align: left;
        position: absolute;
        left: 46px;
        z-index: 0;
        color: #bbb;
      }
      #tax_chart_x_sliders > div:hover .right, #tax_chart_x_sliders > div:hover .left,
      #tax_chart_x_sliders > div.hover .right, #tax_chart_x_sliders > div.hover .left{
        color: #000;
      }
      #tax_chart_x_sliders > div:hover, #tax_chart_x_sliders > div.hover{
        cursor: ew-resize;
        color: #000;
        border: 1px solid #000;
      }
      #tax_chart_x_sliders > div div.indicator{
        width: 46px;
        height: 18px;
        position: absolute;
        top: -1px;
        left: -1px;
        z-index: 1;
        background: #fff;
        border: 1px solid #aaa;
      }
      #tax_chart_x_sliders > div:hover div.indicator,
      #tax_chart_x_sliders > div.hover div.indicator{
        z-index: 2;
        border: 1px solid #000;
      }
      #tax_chart_x_sliders > div div.dashed_divider{
        position: absolute;
        bottom: 18px;
        height: 105px;
        width: 0px;
        left: 50%;
        border-left: 1px dashed #ccc }
        #tax_chart_x_sliders > div:hover div.dashed_divider,
        #tax_chart_x_sliders > div.hover div.dashed_divider{
          border-left-color: #666 }

  #line_graph_overlay{
    /*background: rgba(0,0,0,0.01);*/
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 6;
  }


  label.options{
    width: 100%;
    text-align: left;
    margin-bottom: 0px;
    height: 18px;
    display: block;
  }
  label.options input[type=text]{
    margin: 0;
    padding: 2px;
    line-height: normal;
  }

  .tutorial{ display: none }


  #active_tax_code_menu ul li{
    list-style: none;
  }
  #active_tax_code_menu a{
    display: block;
    padding: 8px 10px;
    width: 290px;
    color: #ddd;
    border-bottom: 1px solid #000;
    text-decoration: none; }
    #active_tax_code_menu a:hover{
      background: #222;
      color: #fff }
    #active_tax_code_menu a div{
      font-size: 11px }
  #reset_to_current_tax_code{
    display: block;
    padding: 10px;
    width: 100% }
</style>


<div class="container" style="margin: 25px auto 5px">
  <div class="row">
    <div class="span12 columns">
      <h1 class="fancy-text" style="font-size: 36px">Tax fairness: an interactive infographic</h1>
      <p style="color: #999">
        Explore the Federal Income Tax and its effects &ndash; adjust tax brackets and deductions.<br>
        Drag the brackets to get started.
        <a target="_blank" href="https://blog.splitwise.com/2012/04/12/the-splitwise-tax-fairness-project/">Learn more Â»</a>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="span16 columns">

      <div id="tax_chart_container">
        <div id="legend">
          <span class="color_block" style="background: #BAD6C3"></span> Marginal tax brackets <br>
          <span class="color_block" style="background: #dd8866"></span> Effective tax rate
        </div>
        <div class="tutorial both" style="position: absolute; top: 15px; right: 15px; color: #fff; font-size: 24px; z-index: 5; padding: 9px 12px; border-radius: 5px; background: rgba(0,0,0,0.5); font-weight: 300">
            Drag the brackets to get started!
        </div>
        <div class="tutorial top" style="position: absolute; top: 106px; right: 270px; color: #fff; font-size: 12px; z-index: 5; padding: 5px 7px; border-radius: 5px; background: rgba(0,0,0,0.5)">
            Drag to adjust tax rate
          <img src="../assets/calculators/tax/tutorial_arrow_1.png" style="position: absolute; top: 10px; right: -30px;">
        </div>
        <div class="tutorial bottom" style="position: absolute; bottom: 22px; left: 580px; color: #fff; font-size: 12px; z-index: 5; padding: 5px 7px; border-radius: 5px; background: rgba(0,0,0,0.5)">
            Drag to adjust income level
          <img src="../assets/calculators/tax/tutorial_arrow_2.png" style="position: absolute; top: 10px; left: -30px;">
        </div>
        <div id="active_tax_code" class="fancy-text">
          <a href="#" onclick="$('#active_tax_code_menu').toggle(); return false">
            <span id="active_tax_code_name">Current tax code (2012)</span>
            <span style="font-size: 13px; text-decoration: none; color: inherit">&#9660;</span>
          </a>
        </div>
        <a id="reset_tax_plan" href="#" onclick="reset(); return false" style="display: none">[reset]</a>
        <div id="filing_status">
          Shown for: married filing jointly
        </div>
        <div id="active_tax_code_menu">
          <a href="#" onclick="reset(); setActivePlan('/brackets/0|196|353|432|479|543/10.1|14.9|25.0|28.1|33.0|35.1/params/1|1|1|0|1|15/name/Current%20tax%20code%20%282012%29'); initialize(); $('#active_tax_code_menu').hide(); return false" id="reset_to_current_tax_code" style="border-radius: 0 5px 0 0">View current tax code (2012) &raquo;</a>
        </div>

        <div class="label-y">Tax rate</div>
        <div class="label-x">Income before taxes</div>
        <div id="tax_chart"></div>
        <div id='line_graph_overlay'></div>
        <div id="net_effect">
          <h5>Effect on U.S. budget:</h5>
          <div class="fancy-text" id="net_effect_summary">
            $313B tax cut
          </div>
          <div class="fancy-text" id="net_effect_percentage">
          </div>
        </div>
        <div id="mouseover_tooltip">
          <div class="line"></div>
          <div id="mouseover_tooltip_details">
            <span style='font-size: 11px'>Income:</span> <span style="font-size: 14px" class="income">$45,670</span><br>
            <span style='font-size: 11px'>Federal tax:</span> <span style="font-size: 14px" class="federal_tax">$7,123</span><br>
            <span style='font-size: 11px'>Effective tax rate:</span> <span style="font-size: 14px" class="effective_tax_rate">15%</span>
          </div>
        </div>
        <div id="tax_chart_x_sliders"></div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="span12 columns">
      <div class="well" style="height: 76px; padding: 10px">
        <h3 style="line-height: 18px; margin-bottom: 5px">Deductions and advanced options</h3>

        <div style="float: left; width: 248px">
          <label class="options">
            <input type="checkbox" name="earned_income_credit" id="earned_income_credit" value="blah" onclick="initialize()" checked="checked" />
            Earned Income Credit (EIC)
            <img class="icon tool_tip" style="vertical-align: text-bottom" title="The Earned Income Credit is a tax credit for people who are working and have low-to-moderate wages. It can result in negative income tax rates, especially for working families, which helps offset payroll taxes. " src="https://assets.splitwise.com/assets/icons/system-help-2e9b74bc37bf265ff82fb933b92baa214c3f9df713efb102722e4ff285f63d3b.png" />
          </label>
          <label class="options">
            <input type="checkbox" name="amt" id="amt" value="blah" onclick="initialize()" checked="checked" />
            Alternative Minimum Tax (AMT)
            <img class="icon tool_tip" style="vertical-align: text-bottom" title="The Alternative Minimum Tax is a secondary tax system that affects high-earners who reduce their regular taxes below a certain threshold. It has been controversial recently, as the tax is complex, not indexed to inflation, and increasingly affects the middle class." src="https://assets.splitwise.com/assets/icons/system-help-2e9b74bc37bf265ff82fb933b92baa214c3f9df713efb102722e4ff285f63d3b.png" />
          </label>
        </div>
        <div style="float: left; width: 217px">
          <label class="options">
            <input type="checkbox" name="mortgage_interest_deduction" id="mortgage_interest_deduction" value="blah" onclick="initialize()" checked="checked" />
            Deduct mortgage interest
            <img class="icon tool_tip" style="vertical-align: text-bottom" title="Mortgage interest is currently deductible, which provides tax advantages for owning a house. The mortgage interest deduction is one of the most expensive deductions and accounts for nearly 30% of all itemized deductions." src="https://assets.splitwise.com/assets/icons/system-help-2e9b74bc37bf265ff82fb933b92baa214c3f9df713efb102722e4ff285f63d3b.png" />
          </label>
          <label class="options">
            <input type="checkbox" name="buffett_rule" id="buffett_rule" value="blah" onclick="initialize()" />
            Buffett Rule
            <img class="icon tool_tip" style="vertical-align: text-bottom" title="The Buffett Rule is a proposal that would force people earning over $1M to pay a minimum of 30% tax. It is similar in spirit to the Alternative Minimum Tax, but is focused on taxing high-earners earning mostly investment income (currently taxed at 15%)." src="https://assets.splitwise.com/assets/icons/system-help-2e9b74bc37bf265ff82fb933b92baa214c3f9df713efb102722e4ff285f63d3b.png" />
          </label>
        </div>
        <div style="float: left; width: 210px">
          <label class="options">
            <input type="checkbox" name="capital_gains_separate" id="capital_gains_separate" value="blah" onclick="initialize()" checked="checked" />
            Tax long-term capital gains</label>
          <label class="options" style="margin-top: -5px">
            separately at a rate of <input type="text" name="capital_gains_rate" id="capital_gains_rate" value="15" style="width: 20px; color: #555" onkeyup="initialize()" onclick="e.stopPropagation()" />%
            <img class="icon tool_tip" style="vertical-align: text-bottom" title="Money made through profitable long-term investing (owning an asset like a house, starting a company, or through qualified dividends) has historically been taxed differently to prevent double taxation and encourage investment. It has been controversial recently because it enables some professional investors to pay lower tax rates than middle-class earners." src="https://assets.splitwise.com/assets/icons/system-help-2e9b74bc37bf265ff82fb933b92baa214c3f9df713efb102722e4ff285f63d3b.png" />
          </label>
        </div>
        <div style="clear:both"></div>
      </div>
      <div style="margin-top: 10px">
        Want to know more about our methodology?
        <a target="_blank" href="https://blog.splitwise.com/about/notes-and-citations-for-tax-project/">Read all about it.</a>
      </div>
    </div>
    <div class="span4 columns" style="margin-right: 0">
      <div class="well" style="padding: 10px; height: 133px; font-size: 14px; color: #555; line-height: 130%; border-color: #ccf; background-color: #eef">
        <img src="../assets/boilerstrap/mastheads/iphone-small.png" style="float: left; margin: 0 10px 0 0; width: 70px; margin-top: 0px; margin-left: 0">
        <p style="margin: 4px 0; font-size: 14px">
          Keep track of group expenses and IOUs with Splitwise!
        </p>
        <a href="../index.html" class="btn large error" style="margin-top: 5px; font-size: 18px; padding: 9px 10px">Sign up &raquo;</a>
      </div>
    </div>
  </div>
</div>

<script>
  var defaultParams, currentParams;

  function setParams(array){
    $('#earned_income_credit').prop(       "checked", array[0] == '1');
    $('#amt').prop(                        "checked", array[1] == '1');
    $('#mortgage_interest_deduction').prop("checked", array[2] == '1');
    $('#buffett_rule').prop(               "checked", array[3] == '1');
    $('#capital_gains_separate').prop(     "checked", array[4] == '1');
    $('#capital_gains_rate').val(array[5]);
  }

  window.fbAsyncInit = function() {
    // setActivePlan();
  }

  function setActivePlan(hash){
    $('.tutorial').hide();

    // set current hash, if supplied
    if (hash)
      location.hash = hash;

    // parse current location.hash and set current active plan
    if (location.hash){
      //Fix for old links with , in them
      if (location.hash.indexOf(",") != -1) {
        location.hash = location.hash.replace(/,/g, "|");
      }

      var hash_values = location.hash.split("../index.html");

      var xs = hash_values[2].split("|");
      for(var i = 0; i < xs.length; i++){
        xs[i] = parseInt(xs[i]);
        if (xs[i] > xMax) xs[i] = xMax;
      }

      var ys = hash_values[3].split("|");

      //Fix for old links that measured height in pixels, rather than as a %
      if (ys[0].indexOf(".") == -1) {
        for(var i = 0; i < ys.length; i++){
          ys[i] = parseFloat(ys[i]) * 3.0/4;

          // don't round all .5s up to the higher number
          if (ys[i] % 2 > 1)
            ys[i]= Math.round(ys[i]);
          else
            ys[i] = Math.round(ys[i]) - 1;
        }
      } else {
        for(var i = 0; i < ys.length; i++) ys[i] = percentageToHeight(parseFloat(ys[i]));
      }


      xPositions = xs.slice(0);
      yPositions = ys.slice(0);

      currentParams = hash_values[5].split("|");

      if (hash_values[6] && hash_values[6] == "name")
        defaultParams = currentParams.slice(0);

      setParams(currentParams);

      if (hash_values[6] && hash_values[6] == "name"){
        // this is a saved tax plan, shared with others
        taxPlanName = unescape(hash_values[7]);
        $('#active_tax_code_name').text(taxPlanName);
        xDefaults = xPositions.slice(0); // shallow copy
        yDefaults = yPositions.slice(0);
      }
    }

    $('#static_vote_buttons, #submit_vote_buttons').html('\
      <div class="fb-like" data-send="false" data-layout="box_count" data-width="50" data-show-faces="true" style="vertical-align: top" data-url="' + encodeURI(document.location.href) + '" data-counturl="' + encodeURI(document.location.href) +'"></div>\
      <a href="https://twitter.com/share" class="twitter-share-button" data-text="I just voted for a proposal to change the U.S. tax code. Check out this interactive infographic:" data-count="vertical" data-via="splitwise" data-url="'+encodeURI(document.location.href)+'" data-counturl="'+encodeURI(document.location.href)+'">Tweet</a>');

    $.getScript('https://platform.twitter.com/widgets.js', function(e) {
      // twttr.ready(function (twttr) {
      //   alert('twtter ready');
      //   twttr.events.bind('tweet', function(event) {
      //     alert('sending vote 2');
      //     $.post('/tax_votes', {tax_plan_parameters: location.hash, method: 'twitter'});
      //   });
      // });
      // twttr.events.bind('tweet', function(event) {
      //   alert('sending vote');
      //   $.post('/tax_votes', {tax_plan_parameters: location.hash, method: 'twitter'});
      // });
    });

    var facebookVote = function(response) {
      //alert(response);
    }

    if (typeof FB !== 'undefined'){
      FB.Event.unsubscribe('edge.create', facebookVote);
      FB.XFBML.parse(document.getElementById('static_vote_buttons'));
      FB.XFBML.parse(document.getElementById('submit_vote_buttons'));
      FB.Event.subscribe('edge.create', facebookVote);
    }
  }






  var xMin = 0;
  var xMax = $('#tax_chart').width();
  var yMin = 0;
  var yMax = parseFloat($('#tax_chart').height());
  var yMinPercent = -25;
  var yMaxPercent = 75;
  var yPercentageRange = yMaxPercent - yMinPercent;
  var taxPlanName = "Current tax code (2012)";


  var xPositions = [ 0,
                     Math.round(incomeToPercent(17400)*xMax),
                     Math.round(incomeToPercent(70700)*xMax),
                     Math.round(incomeToPercent(142700)*xMax),
                     Math.round(incomeToPercent(217450)*xMax),
                     Math.round(incomeToPercent(388350)*xMax)
                   ];

  var yPositions = [ Math.round(10.0 / yPercentageRange * yMax),
                     Math.round(15.0 / yPercentageRange * yMax),
                     Math.round(25.0 / yPercentageRange * yMax),
                     Math.round(28.0 / yPercentageRange * yMax),
                     Math.round(33.0 / yPercentageRange * yMax),
                     Math.round(35.0 / yPercentageRange * yMax)
                   ];

  var xDefaults = xPositions.slice(0); // shallow copy
  var yDefaults = yPositions.slice(0);
  defaultParams = [1,1,1,0,1,15];

  // if (!location.hash || )

  // Parse the current hash for values, on initial page load
  setActivePlan();

  function reset(){
    updateActiveTaxPlan(true); //true = reset to page load
    initialize();
  }



  function heightAsPercentage(heightInPixels){
    return heightInPixels / yMax * yPercentageRange; }
  function percentageToHeight(percentage){
    return Math.round(percentage / yPercentageRange * yMax); }

  function CommaFormatted(amount)
  {
    var delimiter = ","; // replace comma if desired
    amount = new String(amount);
    var i = parseInt(amount);
    if(isNaN(i)) { return ''; }
    var minus = '';
    if(i < 0) { minus = '-'; }
    i = Math.abs(i);
    var n = new String(i);
    var a = [];
    while(n.length > 3)
    {
      var nn = n.substr(n.length-3);
      a.unshift(nn);
      n = n.substr(0,n.length-3);
    }
    if(n.length > 0) { a.unshift(n); }
    n = a.join(delimiter);
    amount = n;
    amount = minus + amount;
    return amount;
  }


  function initialize(){
    $("#tax_chart_container").unbind('mousemove').mousemove(function(event) {
      var x = event.pageX - $("#tax_chart_container").offset().left;

      if (x < 0)
        x = 0;
      if (x > xMax)
        x = xMax;


      var income = Math.round(percentToNumericIncome(x * 1.0 / xMax));
      var total_tax = Math.round(totaltaxmerged(defaultbrackets(), 2, 2, 0, income, 0)); //Math.round(x * 100);
      var percent = (total_tax*100.0/income).toFixed(1);
      if (isNaN(percent)) percent = (0).toFixed(1);


      var y = yMax*3.0/4 - percent/yPercentageRange*yMax;
      var boxY = event.pageY - $("#tax_chart_container").offset().top;

      if (y < 5)
        y = 5;
      if (y > yMax - 8)
        y = yMax - 8;


      if (y > 340 || boxY > y){
        $('#mouseover_tooltip').addClass('low');
      } else
        $('#mouseover_tooltip').removeClass('low');


      // -inf bug
      if (percent < -100)
        percent = 0.0;


      $('#mouseover_tooltip').css('left', x).css('top', y);
      $('#mouseover_tooltip .income').text('$'+CommaFormatted(income));

      if (total_tax < 0)
        $('#mouseover_tooltip .federal_tax').text('-$'+CommaFormatted(-total_tax));
      else
        $('#mouseover_tooltip .federal_tax').text('$'+CommaFormatted(total_tax));

      $('#mouseover_tooltip .effective_tax_rate').text(percent+'%');
      // console.log("TEST");
      // var msg = "Handler for .mousemove() called at ";
      // msg +=  + ", " + event.pageY;
      // $("#log").append("<div>" + msg + "</div>");
    });
    drawTaxChart();
    drawTaxXSliders();
  }

  function drawTaxChart(){
    $('#tax_chart').html("");

    var i = 0;
    for(i = 0; i < xPositions.length; i++){
      var nextX = (i == xPositions.length - 1 ? xMax : xPositions[i+1]) - 1;

      jQuery('<div/>', {
          id: 'bar-'+i,
          'data-id': i,
          'class': 'bar',
          style: 'left: '+xPositions[i]+'px; height: '+yPositions[i]+'px;  width: '+(nextX - xPositions[i])+'px; background: '+percentToColor(heightAsPercentage(yPositions[i]))
      }).html("<div class='description'>"+Math.round(heightAsPercentage(yPositions[i]))+"%</div><div class='vertical-drag'>&#x2195;</div>").appendTo('#tax_chart');

      jQuery('<div/>', {
          id: 'on_top-'+i,
          'data-id': i,
          'class': 'bar on_top',
          style: 'left: '+xPositions[i]+'px; height: '+yPositions[i]+'px;  width: '+(nextX - xPositions[i])+'px;'
      }).appendTo('#tax_chart');
    }

    $('.bar').resizable({
      containment: "#tax_chart",
      handles: "n",
      minHeight: 1,
      resize: function(){ updateBarHeight($(this)) },
      stop: function(){ updateBarHeight($(this)) }
    });

    $('.on_top').hover(function(e){
      var id = parseInt($(this).attr('data-id'));
      $('.bar:not(.on_top)[data-id='+id+']').addClass('hover');
      $('#x_slider-'+id).addClass('hover');
      $('#x_slider-'+(id+1)).addClass('hover');
    },function(e){
      var id = parseInt($(this).attr('data-id'));
      $('.bar:not(.on_top)[data-id='+id+']').removeClass('hover');
      $('#x_slider-'+id).removeClass('hover');
      $('#x_slider-'+(id+1)).removeClass('hover');
    })

    // $('#filing_status').text('Filing status: '+$('#filing_stat').val());

    initializeLineGraph();
  }

  function updateActiveTaxPlan(reset){

    // var active_tax_code_name;

    // if ($(yDefaults).not(yPositions).get().length == 0 && $(xDefaults).not(xPositions).get().length == 0)
    //   active_tax_code_name = "Current tax code (2012)";
    // else
    //   active_tax_code_name = "My tax code"

    // $('#active_tax_code_name').text(active_tax_code_name);


    hash_string = "#/brackets/"+xPositions.join("|")+'/'+jQuery.map(yPositions, function(n, i){return heightAsPercentage(n).toFixed(1);}).join("|");

    hash_string += "../params/index.html";
    // AMT, EIC, mortgage_interest_deduction, buffett
    currentParams = [$('#earned_income_credit:checked').length,$('#amt:checked').length,$('#mortgage_interest_deduction:checked').length,$('#buffett_rule:checked').length,
      $('#capital_gains_separate:checked').length,escape($('#capital_gains_rate').val())];


    var paramsEqualDefaults = true;
    if (defaultParams == undefined)
      paramsEqualDefaults = true;
    else
      for (var x = 0; x < currentParams.length; x++)
        if (currentParams[x] != defaultParams[x])
          paramsEqualDefaults = false;


    hash_string += currentParams.join("|");

    // if this is an existing plan, append plan name
    if (taxPlanName && ($(yDefaults).not(yPositions).get().length == 0 && $(xDefaults).not(xPositions).get().length == 0 && paramsEqualDefaults))
      hash_string += "/name/"+escape(taxPlanName);

    location.hash = hash_string;


    if (reset == true){
      xPositions = xDefaults.slice(0);
      yPositions = yDefaults.slice(0);
      setParams(defaultParams);
      $('#active_tax_code_name').text(taxPlanName);
      $('#reset_tax_plan').hide();
      $('.custom_plan').fadeOut(200);
      $('.vote_for_plan').delay(250).fadeIn();
      $('#vote_for_plan_button').show();
      $('#static_vote_buttons').hide();
      $('#submit_plan').delay(225).css({'background': '#eef', 'border-color': '#ccd'});
    } else if ($(yDefaults).not(yPositions).get().length != 0 || $(xDefaults).not(xPositions).get().length != 0 || !paramsEqualDefaults){
      $('#active_tax_code_name').text("My tax plan");
      $('#reset_tax_plan').fadeIn();
      $('.vote_for_plan').fadeOut(200);
      $('.custom_plan').delay(250).fadeIn();
      $('#submit_plan').delay(225).css({'background': '#efe', 'border-color': '#9c9'});
    }


    updateNetEffectSummary();
    // TODO: update "vote for this plan" box
  }

  function drawTaxXSliders(){
    $('#tax_chart_x_sliders').html("");

    var i = 0;
    for(i = 1; i < xPositions.length; i++){
      jQuery('<div/>', {
          id: 'x_slider-'+i,
          'data-id': i,
          'class': 'x_slider',
          style: 'left: '+xPositions[i]+'px'
      }).html("<div class='dashed_divider'></div><div class='left'>&#9668;</div><div class='right'>&#9658;</div><div class='indicator'>"+percentToIncome(xPositions[i] * 1.0 / xMax)+"</div>").appendTo('#tax_chart_x_sliders');
    }

    $('.x_slider').draggable({
      containment: '#tax_chart_container',
      axis: 'x',
      drag: function(){ updateXSlider($(this)); drawTaxChart() },
      stop: function(){ updateXSlider($(this)); drawTaxChart() }
    });

    var windowOffset = $('#tax_chart_container').offset();
    for (var i = 1; i < xPositions.length; i++){
      var leftBound = xPositions[i-1] + windowOffset.left;
      var rightBound = (i == xPositions.length - 1 ? xMax : xPositions[i+1]) + windowOffset.left;
      $("#x_slider-"+i).draggable("option","containment", [leftBound, 0, rightBound, 0]);
    }
  }

  function updateBarHeight(bar){
    $('.tutorial.top, .tutorial.both').fadeOut();
    var id = parseInt(bar.attr('data-id'));
    var height = bar.height();
    var color_bar = $('#bar-'+id)
    color_bar.css('height', height+'px');

    yPositions[parseInt(bar.attr('data-id'))] = height;
    color_bar.css('background', percentToColor(heightAsPercentage(height)));
    color_bar.find('.description').text(Math.round(heightAsPercentage(height))+"%");

    initializeLineGraph();

    if ($('.vote_for_plan').is(":visible") && !$('.vote_for_plan').is(':animated')) {
      $('.custom_plan').delay(200).fadeIn();
      $('.vote_for_plan').fadeOut(200);
    };
  }


  function updateXSlider(x_slider){
    $('.tutorial.bottom, .tutorial.both').fadeOut();

    var id = parseInt(x_slider.attr('data-id'));
    var left = x_slider.position().left;

    xPositions[id] = left;
    x_slider.html("<div class='dashed_divider'></div><div class='left'>&#9668;</div><div class='right'>&#9658;</div><div class='indicator'>"+percentToIncome(xPositions[id] * 1.0 / xMax)+"</div>");


    var windowOffset = $('#tax_chart_container').offset();
    for (var i = 1; i < xPositions.length; i++){
      var leftBound = xPositions[i-1] + windowOffset.left;
      var rightBound = (i == xPositions.length - 1 ? xMax : xPositions[i+1]) + windowOffset.left;
      $("#x_slider-"+i).draggable("option","containment", [leftBound, 0, rightBound, 0]);
    }
  }

  function percentToColor(percent){
    if (percent <= 1.0)
      percent = Math.round(percent * 100);

    percent = 50 - percent;
    percent *= 1.3;
    percent += 185;
    percent = Math.round(percent);

    return '#'+Math.round(percent/1.15).toString(16)+percent.toString(16)+Math.round(percent/1.1).toString(16);
  }

  function percentToNumericIncome(percent){
    if (percent == 0)
      return 0.0;

    var min = 3000.0;
    var max = 13270239.0;
    var multiplier = max / min;
    var base = 10.0;
    var power = Math.log(multiplier)/Math.log(base);


    if (percent <= 1.0)
      percent = percent * 100.0;

    return min*Math.pow(base,power*percent/100.0);
  }

  function percentToIncome(percent){
    var income = percentToNumericIncome(percent);

    if (income < 1000000)
      return "$"+Math.round(income/1000.0)+"K";
    else if (income < 10000000)
      return "$"+(Math.round(income/1000000.0*10)/10.0).toFixed(1)+"M";
    else
      return "$"+Math.round(income/1000000.0)+"M";
  }

  function updateNetEffectSummary(){
    var effect = Math.round(wholesystem() - 1165000000000);

    var effect_string = "$";

    if (Math.abs(effect) < 1000000)
      effect_string = "no effect"
    else{
      // find magnitude
      var effect_size = Math.abs(effect);

      if (effect_size < 1000000000)
        effect_string += Math.round(effect_size/1000000)+"M";
      else
        effect_string += (effect_size/1000000000).toFixed(1)+"B";

      if (effect < 0)
        effect_string += " tax cut";
      else
        effect_string += " in new revenues";
    }

    $('#net_effect_summary').text(effect_string);

    if (effect >= 0)
      $('#net_effect_percentage').text('cuts 2012 deficit by '+(effect/1327000000000.0*100).toFixed(1)+'%')
    else
      $('#net_effect_percentage').text('increases 2012 deficit by '+(-effect/1327000000000.0*100).toFixed(1)+'%')
    // / 1327000000000.0;
  }

  function incomeToPercent(income){
    var min = 3000.0;
    var max = 13270239.0;
    var multiplier = max / min;
    var base = 10.0;
    var power = Math.log(multiplier)/Math.log(base);

    return Math.log(income / min) / Math.log(10) / power;
  }




  function resizeWindowHandler(){
    if ($(window).width() > 1200){
      $('.compressed').hide();
      $('.expanded').show();
    } else {
      $('.compressed').show();
      $('.expanded').hide();
    }
  }

  $(document).ready(function(){
    initialize();

    $(window).resize(function() {
      resizeWindowHandler();
    });

    resizeWindowHandler();

    if (location.hash == "#/brackets/0|196|353|432|479|543/10.1|14.9|25.0|28.1|33.0|35.1/params/1|1|1|0|1|15/name/Current%20tax%20code%20%282012%29")
      $(document).ready(function(){
        $('.tutorial').fadeIn();
        $('#vote_for_plan_button').hide();
        $('#static_vote_buttons').show();
      });
  });

  function showSubmit(){
    $('#share_submitted_plan').hide();
    $('#submit_plan_form').show();
    $('#tax_plan_name').val("");
    $('#submit').modal({
      backdrop: true,
      closeOnEscape: true,
      keyboard: true,
      show: true
    });
    $('#submit').hide().fadeIn();
    $('#tax_plan_name').focus();
  }

  var ShareThisLink = {
    shorten : function() {
      $('#share_tax_plan_link').val(document.location.href);
    }
  };

  function submitPlan(){
    if($('#tax_plan_name').val() == "")
      return alert('Please enter a name for your plan!');

    taxPlanName = $('#tax_plan_name').val();
    setActivePlan(location.hash+"/name/"+escape(taxPlanName));
    reset();      // update location hash and table to indicate that this plan has been saved

    $('#tax_plan_plan_parameters').val(location.hash);
    $('#tax_plan_projection').val(wholesystem());

    // Show share links
    $('#vote_for_plan_button').hide();
    $('#static_vote_buttons').show();
    $('#share_submitted_plan').show();
    $('#submit_plan_form').hide();

    ShareThisLink.shorten();
    return true;
  }
</script>





<script>

            function singlebrackets()
            {
              var myBrackets = [0.10, 0.15, 0.25, 0.28, 0.33, 0.35];
              var myThresholds = [0, 8700, 35350, 85650, 178650, 388350];
              return [myThresholds, myBrackets];
            }
            function marriedbrackets()
            {
              var myBrackets = [0.10, 0.15, 0.25, 0.28, 0.33, 0.35];
              var myThresholds = [0, 17400, 70700, 142700, 217450, 388350];
              return [myThresholds, myBrackets];
            }
            function headofhouseholdbrackets()
            {
              var myBrackets = [0.10, 0.15, 0.25, 0.28, 0.33, 0.35];
              var myThresholds = [0, 12400, 47350, 122300, 198050, 38008350];
              return [myThresholds, myBrackets];
            }

            function capgainstax(amount, percentcapgains, cutoff, caplowbracket, caphighbracket)
            {

                 if(amount <= cutoff)
                    return caplowbracket*amount*percentcapgains;
                 if(amount > cutoff)
                    return caphighbracket*amount*percentcapgains;
            }


            function totaltaxstandard(brackets, returntype, kids, other, myamount, eic_fudge)
            {
              var myThresholds = brackets[0];
              var myBrackets = brackets[1];
              var origamount = myamount;
              var percentcapgains = capitalgainspercent(myamount);
              var kidsweights = [0.51, 0.22, 0.15, 0.12];
              //var avgkids = 0;
              //for (var x = 0; x < kidsweights.length; x++)
              //  avgkids += x * kidsweights[x];

              var caplowbracket = 0;
              var caphighbracket = 0.15;
              var taxreturnmy = 0;
              var cap_gains_tax = capgainstax(myamount, percentcapgains, myThresholds[2], caplowbracket, caphighbracket);

              //Call after calculating - cap gains bracket depends on total income
              if($('#earned_income_credit:checked').length > 0){
                //for (var x = 0; x < kidsweights.length; x++){
                  taxreturnmy -= (EarnedIncomeCredit(myamount, returntype, kids) / (eic_fudge ? 2.9 : 1.0)); //* //kidsweights[x];
                //}
              }

              if($('#capital_gains_separate:checked').length > 0){
                myamount = myamount - myamount*percentcapgains;
                taxreturnmy += Math.round(cap_gains_tax);
              }

              //2012 numbers
              deduction = 0;
              exemption = 3800;

              totalpeople = 1 + kids + (returntype==2);
              deduction += totalpeople*exemption;

              if (returntype==1) //single
                  deduction += 5950;
              if (returntype==2) //married
                  deduction += 11900;
              if (returntype==3) //head of household
                  deduction += 8700;
              if (returntype == 4) //widow/widow-er
                  deduction += 11900;

              deduction += kids*950;

              myamount = Math.max(myamount-deduction,0); //Hard coded for a family of 4

              for (i = 1; i < myThresholds.length; i++)
              {
                var amountinbracket = 0;
                if(myamount > myThresholds[i])
                  amountinbracket = myThresholds[i]-myThresholds[i-1];
                else
                    amountinbracket = Math.max(0, myamount-myThresholds[i-1]);
                taxreturnmy += amountinbracket*myBrackets[i-1];
              }

              taxreturnmy += Math.max(0, myamount - myThresholds[myThresholds.length-1])*myBrackets[myBrackets.length-1];




              if(origamount > 1000000 && taxreturnmy /(1.0*origamount) < 0.30 && $('#buffett_rule:checked').length > 0)
                return origamount*0.30;

              return taxreturnmy;
        }

        function totaltaxstandardaverage(brackets, returntype, kids, other, myamount, eic_fudge)
        {
          var myThresholds = brackets[0];
          var myBrackets = brackets[1];
          var origamount = myamount;
          var percentcapgains = capitalgainspercent(myamount);
          var kidsweights = [0.51, 0.22, 0.15, 0.12];
          var avgkids = 0;
          for (var x = 0; x < kidsweights.length; x++)
            avgkids += x * kidsweights[x];

          var caplowbracket = 0;
          var caphighbracket = 0.15;
          var taxreturnmy = 0;
          var cap_gains_tax = capgainstax(myamount, percentcapgains, myThresholds[2], caplowbracket, caphighbracket);

          //Call after calculating - cap gains bracket depends on total income
          if($('#earned_income_credit:checked').length > 0){
            //for (var x = 0; x < kidsweights.length; x++){
              //huge hack as in totaltaxitemizedaverage
              taxreturnmy -= (EarnedIncomeCredit(myamount, returntype, 1) / (eic_fudge ? 2.9 : 1.0)); //* //kidsweights[x];
            //}
          }

          if($('#capital_gains_separate:checked').length > 0){
            myamount = myamount - myamount*percentcapgains;
            taxreturnmy += Math.round(cap_gains_tax);
          }

          //2012 numbers
          deduction = 0;
          exemption = 3800;

          totalpeople = 1 + avgkids + (returntype==2);
          deduction += totalpeople*exemption;

          if (returntype==1) //single
              deduction += 5950;
          if (returntype==2) //married
              deduction += 11900;
          if (returntype==3) //head of household
              deduction += 8700;
          if (returntype == 4) //widow/widow-er
              deduction += 11900;

          deduction += avgkids*950;

          myamount = Math.max(myamount-deduction,0); //Hard coded for a family of 4

          for (i = 1; i < myThresholds.length; i++)
          {
            var amountinbracket = 0;
            if(myamount > myThresholds[i])
              amountinbracket = myThresholds[i]-myThresholds[i-1];
            else
                amountinbracket = Math.max(0, myamount-myThresholds[i-1]);
            taxreturnmy += amountinbracket*myBrackets[i-1];
          }

          taxreturnmy += Math.max(0, myamount - myThresholds[myThresholds.length-1])*myBrackets[myBrackets.length-1];




          if(origamount > 1000000 && taxreturnmy /(1.0*origamount) < 0.30 && $('#buffett_rule:checked').length > 0)
            return origamount*0.30;

          return taxreturnmy;
    }

        function capitalgainspercent(income)
        {
          var Incomes = [2575.44, 7439.91, 12440.51, 17412.10, 22454.16, 27487.22, 34694.90, 44669.03, 60359.93, 85245.81, 129490.04, 283580.88, 675256.45, 1194523.48, 1723065.76, 2965738.58, 6855610.78, 29230755.96];
          var Brackets = [0.04, 0.02, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.02, 0.02, 0.05, 0.10, 0.14, 0.16, 0.18, 0.24, 0.37]

          return interpolate(income, Incomes, Brackets);
        }

        function interpolate(x, xarray, yarray)
        {
          //two sorted arrays
          if (x < xarray[0])
            return yarray[0];
          if (x >= xarray[xarray.length-1])
            return yarray[yarray.length-1];
          for (var i = 0; i < xarray.length-1; i++)
          {
            if (x >= xarray[i] && x < xarray[i+1])
              return yarray[i]+(yarray[i+1]-yarray[i])/(xarray[i+1]-xarray[i])*(x-xarray[i]);
          }
        }
        //var EICArray;

        function wholesystem()
        {
          var SingleIncomes = [2575.44, 7439.91, 12440.51, 17412.1, 22454.16, 27487.22, 34694.9, 44669.03, 60359.93, 85245.81, 129490.04, 283580.88, 675256.45, 1194523.48, 1723065.76, 2965738.58, 6855610.78, 29230755.96];
          var MarriedIncomes = [2578.03, 7707.3, 12564.08, 17576.61, 22433.05, 27486.31, 35053.6, 44870.54, 62370.39, 86780.42, 134017.42, 283217.46, 673930.43, 1204604.17, 1719469.53, 2950349.38, 6795290.97, 28644291.55];
          var HOHIncomes = [3016, 7988, 12569, 17465, 22408, 27436, 34569, 44617, 60271, 85191, 127351, 285962, 665999, 1225631, 1729289, 2988346, 14524192, 14524192];

          var SingleReturns = [8684704, 8734982, 7258118, 6184412, 4850046, 4073004, 6639094, 4678990, 6084288, 2122498, 1600840, 319065, 53464, 12797, 5170, 7685, 1855, 1090];
          var MarriedReturns = [852224, 1238790, 1911404, 2076035, 2341212, 2251098, 4379940, 4090486, 10322929, 8557969, 11347616, 2777616, 422476, 90920, 36903, 50864, 11623, 6517];
          var HOHReturns = [752280, 2049601, 3084002, 2940094, 2632356, 2137574, 2955760, 1735030, 1913255, 636468, 464016, 68995, 10539, 2308, 1102, 1464, 536, 0];

          var allTaxes = 0;
          var fudge20122009 = 1165.0 / 945.3541539838452; //1093.8395554963398; // 1002.4704788247158;//948.7548334542344;

          var bracketscouples = defaultbrackets();
          var bracketssingle = defaultbrackets();
          var bracketshoh = defaultbrackets();

          var multiplierssingle = [1, 0.5,0.5,0.60021,0.821568,1];
          var multipliershoh = [1, 0.712644,0.669731,0.857043,0.910784,1];

          for(var j = 0; j < multiplierssingle.length; j++)
              bracketssingle[0][j] *= multiplierssingle[j];

          for(var k = 0; k < multipliershoh.length; k++)
              bracketshoh[0][k] *= multipliershoh[k];

          for(var i = 0; i < SingleIncomes.length; i++){
            allTaxes += totaltaxmerged(bracketssingle, 1, 0, 0, SingleIncomes[i], 1) * SingleReturns[i];
            allTaxes += totaltaxmerged(bracketscouples, 2, 2, 0, MarriedIncomes[i], 1) * MarriedReturns[i];
            allTaxes += totaltaxmerged(bracketshoh, 3, 2, 0, HOHIncomes[i], 1) * HOHReturns[i];
          }

          return allTaxes * fudge20122009;
        }

        function RampFlatRamp(val, startval, slopeup, topval, topstart, topend, slopedown, rampend)
        {
          //hardcoded for a 50-unit step function, for EIC purposes

          if(val >= topstart && val <  topend)
            return topval;
          if(val >= rampend)
            return 0;
          var Clicks = Math.round((val-25) / 50);
          var RampEndClicks = topend / 50 - 1;

          if(val < topstart)
            return Math.round(startval + slopeup*Clicks);
          if(val >= topend)
            return Math.round(topval - (Clicks - RampEndClicks)*slopedown);
        }

        function EarnedIncomeCredit(myval, status, kids)
        {
            if(status==1 || status==3)
            {
               if(kids===0)
                return RampFlatRamp(myval, 1.833333, 3.833333, 464, 6050, 7600, 3.8333, 13650);
               if(kids==1)
                return RampFlatRamp(myval, 9, 17, 3094, 9100, 16700, 8, 36050);
               if(kids==2)
                return RampFlatRamp(myval, 10, 20, 5112, 12750, 16700, 10.5, 40950);
               if(kids>=3)
                return RampFlatRamp(myval, 11, 22.5, 5751, 12750, 16700, 10.5, 44000);
            }
            if(status==2)
            {
               if(kids===0)
                return RampFlatRamp(myval, 1.833333, 3.833333, 464, 6050, 12700, 3.8333, 18750);
               if(kids==1)
                return RampFlatRamp(myval, 9, 17, 3094, 9100, 21800, 8, 41150);
               if(kids==2)
                return RampFlatRamp(myval, 10, 20, 5112, 12750, 21800, 10.5, 46050);
               if(kids>=3)
                return RampFlatRamp(myval, 11, 22.5, 5751, 12750, 21800, 10.5, 49078);
            }
        }








            function defaultbrackets()
            {
              var myBrackets = [0.10, 0.15, 0.25, 0.28, 0.33, 0.35];
        var myThresholds = [0, 17000, 69000, 139350, 212300, 379150];




        for(var i = 0; i < yPositions.length; i++)
          myBrackets[i] = heightAsPercentage(yPositions[i]) / 100.0;


        for(var i = 0; i < xPositions.length; i++)
          myThresholds[i] = percentToNumericIncome(xPositions[i] * 1.0 / xMax);

        //var deductions = 29650; //hardcoded for family of 4, all wages
        //var myEffectiveBrackets = myBrackets;
        //myEffectiveBrackets.unshift(0.0);
        //alert(myEffectiveBrackets.length)
        //var myEffectiveThresholds = [];
        //myEffectiveThresholds.push(0);
        //myEffectiveThresholds.push(deductions);
        //for (var i=1; i<myThresholds.length; i++)
        //{
        //  myEffectiveThresholds.push(myThresholds[i]+deductions);
        //}
        //console.log("myThresholds="+myThresholds.concat()+";myBrackets="+myBrackets.concat()+";myEffectiveThresholds="+myEffectiveThresholds.concat()+";myEffectiveBrackets="+myEffectiveBrackets.concat());
        return [myThresholds, myBrackets];
            }


          function totaltaxitemized(brackets, returntype, kids, other, myamount, eic_fudge)
          {
          var myThresholds = brackets[0];
          var myBrackets = brackets[1];
              var origamount = myamount;
              var percentcapgains = capitalgainspercent(myamount);

              var caplowbracket = 0;
              var caphighbracket = parseFloat($('#capital_gains_rate').val())/100.0;
              if (isNaN(caphighbracket))
                caphighbracket = 0;
              var taxreturn = 0;
              var cap_gains_tax = capgainstax(myamount, percentcapgains, myThresholds[2], caplowbracket, caphighbracket);

              if ($('#amt:checked').length > 0)
                taxreturn += AMT(myamount);


              //var kidsweights = [0.51, 0.22, 0.15, 0.12];
              //var avgkids = 0;
              //for (var x = 0; x < kidsweights.length; x++)
              //  avgkids += x * kidsweights[x];

              //Call after calculating - cap gains bracket depends on total income
              if($('#earned_income_credit:checked').length > 0){
                //for (var x = 0; x < kidsweights.length; x++){
                  taxreturn -= (EarnedIncomeCredit(myamount, returntype, kids) / (eic_fudge ? 2.9 : 1.0)); // * kidsweights[x];
                //}
              }

              if($('#capital_gains_separate:checked').length > 0){
                myamount = myamount - myamount*percentcapgains;
                taxreturn += Math.round(cap_gains_tax);
              }

              //2012 numbers
        deduction = 0;
              exemption = 3800;
              totalpeople = 1+kids + (returntype==2);
              deduction += totalpeople*exemption;

              // mortgage?
              deduction += itemizeddeductionamount(myamount, returntype, $('#mortgage_interest_deduction:checked').length);

              myamount = Math.max(myamount-deduction,0); //Hard coded for a family of 4

              for (i = 1; i < myThresholds.length; i++)
              {
                var amountinbracket = 0;
                if(myamount > myThresholds[i])
                  amountinbracket = myThresholds[i]-myThresholds[i-1];
                else
                    amountinbracket = Math.max(0, myamount-myThresholds[i-1]);
                taxreturn += amountinbracket*myBrackets[i-1];
              }

              taxreturn+= Math.max(0, myamount - myThresholds[myThresholds.length-1])*myBrackets[myBrackets.length-1];

              if(origamount > 1000000 && taxreturn / (1.0*origamount) < 0.30 && $('#buffett_rule:checked').length > 0) //
                return origamount*0.30;

              return taxreturn;
        }


        function totaltaxitemizedaverage(brackets, returntype, kids, other, myamount, eic_fudge)
        {
        var myThresholds = brackets[0];
        var myBrackets = brackets[1];
            var origamount = myamount;
            var percentcapgains = capitalgainspercent(myamount);

            var caplowbracket = 0;
            var caphighbracket = parseFloat($('#capital_gains_rate').val())/100.0;

            if (isNaN(caphighbracket))
              caphighbracket = 0;
            var taxreturn = 0;
            var cap_gains_tax = capgainstax(myamount, percentcapgains, myThresholds[2], caplowbracket, caphighbracket);

            if ($('#amt:checked').length > 0)
              taxreturn += AMT(myamount);


            var kidsweights = [0.51, 0.22, 0.15, 0.12];
            var avgkids = 0;
            for (var x = 0; x < kidsweights.length; x++)
              avgkids += x * kidsweights[x];

            //Call after calculating - cap gains bracket depends on total income
            if($('#earned_income_credit:checked').length > 0){
              //for (var x = 0; x < kidsweights.length; x++){
                //this is a big cheat to get the total amount to be correct while also showing the correct line. - fix it
                taxreturn -= (EarnedIncomeCredit(myamount, returntype, 1) / (eic_fudge ? 2.9 : 1.0)); // * kidsweights[x];
              //}
            }

            if($('#capital_gains_separate:checked').length > 0){
              myamount = myamount - myamount*percentcapgains;
              taxreturn += Math.round(cap_gains_tax);
            }

            //2012 numbers
            deduction = 0;
            exemption = 3800;
            totalpeople = 1+avgkids + (returntype==2);
            deduction += totalpeople*exemption;

            // mortgage?
            deduction += itemizeddeductionamount(myamount, returntype, $('#mortgage_interest_deduction:checked').length);

            myamount = Math.max(myamount-deduction,0); //Hard coded for a family of 4

            for (i = 1; i < myThresholds.length; i++)
            {
              var amountinbracket = 0;
              if(myamount > myThresholds[i])
                amountinbracket = myThresholds[i]-myThresholds[i-1];
              else
                  amountinbracket = Math.max(0, myamount-myThresholds[i-1]);
              taxreturn += amountinbracket*myBrackets[i-1];
            }

            taxreturn+= Math.max(0, myamount - myThresholds[myThresholds.length-1])*myBrackets[myBrackets.length-1];

            if(origamount > 1000000 && taxreturn / (1.0*origamount) < 0.30 && $('#buffett_rule:checked').length > 0)
              return origamount*0.30;

            return taxreturn;
      }


        function itemizeddeductionamount(income, returntype, includemortgage)
    {
      //This function returns the amount of deduction on average to someone a given income by interpolating between 2009 IRS data.
      //If includemortage==0, then it removes the mortgage component from the deduction (based on the 2009 Itemized deduction list.)
      var Incomes, Deductions, mortgagepercent;

      if(returntype==1)
      {
        Incomes = [2575.44, 7439.91, 12440.51, 17412.1, 22454.16, 27487.22, 34694.9, 44669.03, 60359.93, 85245.81, 129490.04, 283580.88, 675256.45, 1194523.48, 1723065.76, 2965738.58, 6855610.78, 29230755.96];
        Deductions = [16615.62, 13708.36, 13946.91, 13772.2, 14287, 13566.82, 13551.06, 15008.86, 16673.94, 19923.09, 25568.75, 52595.83, 109498.71, 187074.21, 253780.37, 454652.07, 964833.24, 4928175.12];
      }
      if(returntype==2)
      {
        Incomes = [2578.03, 7707.3, 12564.08, 17576.61, 22433.05, 27486.31, 35053.6, 44870.54, 62370.39, 86780.42, 134017.42, 283217.46, 673930.43, 1204604.17, 1719469.53, 2950349.38, 6795290.97, 28644291.55];
        Deductions =  [25017.91, 22737.80, 22988.44, 21638.89, 21618.20, 21700.97, 20862.59, 21064.92, 21391.58, 22890.26, 29519.02, 50847.97, 99871.15, 170049.60, 234273.11, 392240.72, 887108.50, 4207145.45];
      }
      if(returntype==3)
      {
        Incomes = [3016, 7988, 12569, 17465, 22408, 27436, 34569, 44617, 60271, 85191, 127351, 285962, 665999, 1225631, 1729289, 2988346, 14524192, 14524192];
        Deductions = [16961, 17128, 16094, 14299, 14270, 14482, 15220, 16509, 18399, 22437, 28996, 52966, 106399, 186123, 236016, 372691, 1899910, 1899910];
      }
      if(includemortgage==0)
      {
        //Technically, I should worry about if some people would no longer choose to itemize if they are not getting their mortgage deduction. However, there are very vew cases where the standard deduction would be more valuable - some moderately sized married couples making less than 40,000 a year, who are basically not paying taxes anyway. So just subtracting the full amount of the deduction seems justifiable.
        mortgagepercent = [0.3216, 0.3356, 0.3207, 0.3397, 0.3542, 0.3915, 0.3835, 0.3900, 0.4008, 0.4136, 0.3988, 0.4095, 0.4238, 0.4205, 0.4002, 0.3311, 0.2156, 0.1272, 0.0923, 0.0536, 0.0223, 0.0041];
        for(var j=0; j < Deductions.length; j++)
        {
          Deductions[j] -= mortgagepercent[j]*Deductions[j];
        }
      }

      return interpolate(income, Incomes, Deductions)
    }


                     function getitemizedweights(returntype)
            {
              if(returntype == 1)
                return ([0.04, 0.05, 0.07, 0.10, 0.13, 0.18, 0.25, 0.37, 0.50, 0.66, 0.85, 0.96, 0.97, 0.97, 0.97, 0.98, 0.98, 0.98]);
              if(returntype == 2)
                return ([0.12, 0.11, 0.11, 0.13, 0.16, 0.18, 0.23, 0.31, 0.43, 0.62, 0.84, 0.96, 0.97, 0.97, 0.98, 0.98, 0.99, 0.99]);
              if(returntype == 3)
                return ([0.03, 0.02, 0.03, 0.05, 0.08, 0.12, 0.23, 0.38, 0.55, 0.77, 0.87, 0.95, 0.94, 0.91, 0.94, 0.96, 0.95, 0.99])
            }

        function getTaxesFromBrackets()
        {
            var Lower = 3000,
            Upper = 13270239.0,
            LogBinSize = 0.02,
            LogLower = Math.log(Lower)/Math.log(10.0),
            LogUpper = Math.log(Upper)/Math.log(10.0),
            currentSalary=1000,
            currentLogSalary=LogLower;
            TotalBins = Math.round((LogUpper - LogLower)/LogBinSize)+3,
            mybrackets = defaultbrackets();

          var toReturn = [];

          for(var i = 0; i <= TotalBins; i++)
          {
            currentLogSalary = LogLower+i*1.0*LogBinSize;
            currentSalary = Math.pow(10, currentLogSalary);
            //alert(currentSalary)
            toReturn.push([currentLogSalary,totaltaxmerged(mybrackets, 2, 2, 0, currentSalary, 0)/(currentSalary*1.0)*100]);
          }
          //alert(toReturn.concat())
          return toReturn;
          //alert(capitalgainspercent(8000000));
        }

        function capitalgainspercent(income)
        {
          var Incomes = [2575.44, 7439.91, 12440.51, 17412.10, 22454.16, 27487.22, 34694.90, 44669.03, 60359.93, 85245.81, 129490.04, 283580.88, 675256.45, 1194523.48, 1723065.76, 2965738.58, 6855610.78, 29230755.96];
          var CapGainsFrac = [0.04, 0.02, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.02, 0.02, 0.05, 0.10, 0.14, 0.16, 0.18, 0.24, 0.37];

          return interpolate(income, Incomes, CapGainsFrac);
        }

        function standarddeductionamount(income, returntype)
    {
      var Incomes, Deductions;

      if(returntype==1)
      {
        Incomes = [2575.44, 7439.91, 12440.51, 17412.1, 22454.16, 27487.22, 34694.9, 44669.03, 60359.93, 85245.81, 129490.04, 283580.88, 675256.45, 1194523.48, 1723065.76, 2965738.58, 6855610.78, 29230755.96];
        Deductions = [4461, 5828, 5937, 5914, 5888, 5899, 5913, 5980, 6114, 6100, 6284, 6180, 6302, 5870, 6111, 5546, 5053, 5156];
      }
      if(returntype==2)
      {
        Incomes = [2578.03, 7707.3, 12564.08, 17576.61, 22433.05, 27486.31, 35053.6, 44870.54, 62370.39, 86780.42, 134017.42, 283217.46, 673930.43, 1204604.17, 1719469.53, 2950349.38, 6795290.97, 28644291.55];
        Deductions =  [25017.91, 22737.80, 22988.44, 21638.89, 21618.20, 21700.97, 20862.59, 21064.92, 21391.58, 22890.26, 29519.02, 50847.97, 99871.15, 170049.60, 234273.11, 392240.72, 887108.50, 4207145.45]
      }
      if(returntype==3)
      {
        Incomes - [3016, 7988, 12569, 17465, 22408, 27436, 34569, 44617, 60271, 85191, 127351, 285962, 665999, 1225631, 1729289, 2988346, 14524192, 14524192];
        Deductions = [8398, 8377, 8384, 8401, 8406, 8427, 8465, 8480, 8536, 8515, 8582, 8327, 8472, 8464, 8412, 8415, 8583]
      }

      return interpolate(income, Incomes, Deductions)
    }

    function AMT(income)
    {
       incomearray = [2605, 7562, 12493, 17457, 22441, 27474, 34782, 44745, 61464, 86389, 133223, 221957, 332394, 674096, 1204015, 1719969, 2955302, 6807231, 29022708];
       amtarray = [0, 0, 495.30, 497.74, 1037.52, 2294.65, 3627.12, 1934.69, 947.35, 1488.70, 2130.34, 2862.85, 7073.58, 12521.45, 28181.10, 42473.81, 67393.68, 146800.83, 498483.36];
       return interpolate(income, incomearray, amtarray);
    }

        function mergeweight(income, returntype){
          var Incomes = [2575.44, 7439.91, 12440.51, 17412.10, 22454.16, 27487.22, 34694.90, 44669.03, 60359.93, 85245.81, 129490.04, 283580.88, 675256.45, 1194523.48, 1723065.76, 2965738.58, 6855610.78, 29230755.96];
          // TODO: update incomes to married figures, rather than individual figures
          //  return 0.5;

          return interpolate(income, Incomes, getitemizedweights(returntype));
        }

        function totaltaxmerged(brackets, returntype, kids, other, myamount, eic_fudge){
          // return 0;

          var weight = mergeweight(myamount, returntype);
          var toReturn = 0;

          // kidsweights = [0, 1, 0, 0];

          if (eic_fudge == 0)
            return (totaltaxitemized(brackets, returntype, kids, other, myamount, eic_fudge) * weight) +
              (totaltaxstandard(brackets, returntype, kids, other, myamount, eic_fudge) * (1-weight));

          //no more loops!
          return (totaltaxitemizedaverage(brackets, returntype, kids, other, myamount, eic_fudge) * weight) +
                (totaltaxstandardaverage(brackets, returntype, kids, other, myamount, eic_fudge) * (1-weight));


          //for(var i = 0; i < kidsweights.length; i++)
          //{
          //  toReturn += totaltaxitemized(brackets, returntype, i, other, myamount, eic_fudge) * weight * kidsweights[i];
          //}
          //for(var j = 0; j < kidsweights.length; j++)
          //{
          //  toReturn += totaltaxstandard(brackets, returntype, j, other, myamount, eic_fudge) * (1-weight) * kidsweights[j];
          //}
          //return toReturn;
        }

        function interpolate(x, xarray, yarray)
        {
          //two sorted arrays
          if (x < xarray[0])
            return yarray[0];
          if (x >= xarray[xarray.length-1])
            return yarray[yarray.length-1];
          for (var i = 0; i < xarray.length-1; i++)
          {
            if (x >= xarray[i] && x < xarray[i+1])
              return yarray[i]+(yarray[i+1]-yarray[i])/(xarray[i+1]-xarray[i])*(x-xarray[i]);
          }
        }
</script>














<script>
  var raphael = Raphael("line_graph_overlay", xMax, yMax);


            function initializeLineGraph() {

              //}


               //setInterval("updateLineGraph()", 200);

                         //function updateLineGraph(){
                // Any time graph changes, check to see if this is a new custom plan
                updateActiveTaxPlan();

                var r = raphael;

                r.clear();

                var W = xMax,
                    H = yMax,
                    Wplotstart = 0,
                    Hplotstart = 0,
                    plotW = xMax,
                    plotH = yMax,
                    // r = Raphael("line_graph_overlay", W, H),
                    Ymin = -25.0,
                    Ymax = 75.0,
                    Xmin = 3.47712125,
                    Xmax = 7.12287874,
                    color = "hsb(240Â°, 1, 1)",
                    //values = [25, 50, 75, 80, 99];
                    valuesx = [];
                    var valuesy = [];



                  udata = [];

                  udata = getTaxesFromBrackets();

                //draw x-axis
                var xaxis = lineUU([Xmin, 0], [Xmax, 0]);


        var myline2 = DrawLineArray(udata);
        myline2.attr({stroke: "#dd8866", "stroke-width": 5, fill: 'none', opacity: 1});



              function lineUU(startu, endu)
              {
                startxy = uxy(startu);
                endxy = uxy(endu);
                return r.path("M"+(startxy[0]+"")+" "+(startxy[1]+"")+"L"+(endxy[0]+"")+" "+(endxy[1]+""));
              }

              function DrawLineArray(data)
              {
                var p = [], thisxy, firstxy, nextxy, lastxy, addon;

                    for (var j = 1, jj = data.length; j < jj; j++)
                    {
                        thisxy = uxy(data[j]);
                        p.push(thisxy[0], thisxy[1]);
                    }
                    firstxy = uxy(data[0]);
                    p = ["M", firstxy[0], firstxy[1], "L"].concat(p);
                    return r.path(p);
              }

                function txy(t)
                {
                  return [Wplotstart+Math.round(t[0]), Hplotstart+plotH-Math.round(t[1])]
                }

                function uxy(u)
                {
                  xt = (u[0]-Xmin*1.0)/(Xmax*1.0-Xmin*1.0)*plotW;
                  yt = (u[1]-Ymin*1.0)/(Ymax*1.0-Ymin*1.0)*plotH;
                  return txy([xt,yt]);
                }

                function ut(u)
                {
                  return([(u[0]-Xmin*1.0)/(Xmax*1.0-Xmin*1.0)*plotW, (u[1]-Ymin*1.0)/(Ymax*1.0-Ymin*1.0)*plotH]);
                }

                function translate(x, y) {
                    return [
                        50 + (W - 60) / (values.length - 1) * x,
                        H - 10 - (H - 20) / 100 * y
                    ];
                }

          };


        </script>

<script>
  // force the calculator to reinitialize on page load, which fixes some bugs as of 2018
  reset();
</script>

      </div>
    </div>
    <footer>
      <div class="fill">
        <div class="container">
          <div class="row">
            <div class="span7 columns" id="social">
              <ul class="nav secondary-nav">
                <li><a href="http://www.facebook.com/splitwise">
                  follow us on Facebook
                  <img src="https://assets.splitwise.com/assets/social/facebook-8755c3830cd00faa5a0658cbbe133834c3e318a280032220c9a24da3c6aaac36.png" />
                </a></li>
                <li><a href="http://twitter.com/splitwise">
                  follow us on Twitter
                  <img src="https://assets.splitwise.com/assets/social/twitter-e36aba4e9f396af22a05341bb83e521bc236a21b8e855a555ac7b424b6db44df.png" />
                </a></li>
              </ul>
            </div>
            <div class="span5 columns" id="copyright_info">
              <div id="copyright">Copyright &copy; 2012 Splitwise. All rights reserved.</div>
              <span class="links">
                <a href="https://blog.splitwise.com/">blog</a> |
                <a href="../terms.html">terms</a> |
                <a href="../press.html">press</a> |
                <a href="../about.html">about</a> |
                <a href="../contact.html">contact us</a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>

    <script>
      var _gaq=[['_setAccount','UA-22826239-1'],['_trackPageview'],['_trackPageLoadTime']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"8d9b13523e6d5994","version":"2024.10.4","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"token":"d788d0b487f64a4c951cb13fb4a5fadd","b":1}' crossorigin="anonymous"></script>
</body>

<!-- Mirrored from www.splitwise.com/taxes/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 28 Oct 2024 12:55:46 GMT -->
</html>
